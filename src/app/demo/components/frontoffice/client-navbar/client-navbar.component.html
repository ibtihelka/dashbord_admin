<!-- client-navbar.component.html - VERSION AVEC IMAGE TÉLÉPERFORMANCE -->

<nav class="client-navbar">
  <div class="navbar-container">
    <!-- Logo seul -->
    <div class="logo-section">
      <img src="assets/layout/images/logo(1).png" alt="Logo" class="round-logo">
    </div>

    <!-- Section centrale: Teleperformance avec image et navigation -->
    <div class="center-section">
      <!-- Teleperformance avec logo -->
      <div class="teleperformance-section" *ngIf="isTeleperformanceUser">
        <img 
          src="assets/layout/images/teleperformance.png" 
          alt="Teleperformance" 
          class="teleperformance-logo"
          (click)="openTeleperformanceWebsite()"
          title="Cliquez pour visiter le site de Teleperformance">
        <span class="teleperformance-name">Teleperformance</span>
      </div>

      <!-- Navigation sous Teleperformance -->
      <div class="center-nav">
        <a class="nav-link" (click)="navigateToHome()" [class.active]="isRouteActive('accueil')">Accueil</a>
        <span class="nav-separator">•</span>
        <a class="nav-link" (click)="navigateToProfil()" [class.active]="isRouteActive('profile')">Profil</a>
        <span class="nav-separator">•</span>
        <a class="nav-link" (click)="navigateToRemboursements()" [class.active]="isRouteActive('mesRemboursements')">Remboursements</a>
        <span class="nav-separator">•</span>
        <a class="nav-link" (click)="navigateToSuggestions()" [class.active]="isRouteActive('mes-suggestions')">Réclamations</a>
        <span class="nav-separator">•</span>
        <a class="nav-link" (click)="navigateToChangeRib()" [class.active]="isRouteActive('changement-rib')">RIB</a>
        <span class="nav-separator">•</span>
        <a class="nav-link" (click)="navigateToChangePhone()" [class.active]="isRouteActive('changement-tel')">Téléphone</a>
      </div>
    </div>

    <!-- User Profile Dropdown -->
    <div class="profile-dropdown" *ngIf="currentUser">
      <button class="profile-button" (click)="toggleProfileDropdown()" type="button">
        <div class="profile-avatar">
          <i class="pi pi-user"></i>
        </div>
        <div class="profile-info">
          <span class="profile-name">{{ getUserDisplayName() }}</span>
        </div>
        <i class="pi pi-chevron-down dropdown-arrow" [class.rotated]="isProfileDropdownOpen"></i>
      </button>

      <!-- Dropdown Menu -->
      <div class="dropdown-menu" [class.show]="isProfileDropdownOpen">
        <div class="dropdown-header">
          <div class="user-info">
            <div class="user-avatar">
              <i class="pi pi-user"></i>
            </div>
            <div class="user-details">
              <span class="user-name">{{ getUserDisplayName() }}</span>
              <small class="user-id">ID: {{ getUserId() }}</small>
            </div>
          </div>
        </div>
        
        <div class="dropdown-divider"></div>
        
        <div class="dropdown-items">
          <button class="dropdown-item" (click)="navigateToProfile()" type="button">
            <i class="pi pi-user"></i>
            <span>Mon Profil</span>
          </button>
          
          <div class="dropdown-divider"></div>
          
          <button class="dropdown-item logout" (click)="logout()" type="button">
            <i class="pi pi-sign-out"></i>
            <span>Se déconnecter</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Loading si pas d'utilisateur -->
    <div class="profile-loading" *ngIf="!currentUser">
      <i class="pi pi-spinner pi-spin"></i>
    </div>
  </div>
</nav>